import unittest
from aoc_20 import enhance

TEST_ALGO = "..#.#..#####.#.#.#.###.##.....###.##.#..###.####..#####..#....#..#..##..###..######.###...####..#..#####..##..#.#####...##.#.#..#.##..#.#......#.###.######.###.####...#.##.##..#..#..#####.....#.#....###..#.##......#.....#..#..#..##..#...##.######.####.####.#.#...#.......#..#.#.#...####.##.#......#..#...##.#.##..#...##.#.##..###.#......#.#.......#.#.#.####.###.##...#.....####.#..#..#.##.#....##..#.####....##...##..#...#......#.#.......#.......##..####..#...#.#.#...##..#.#..###..#####........#..####......#..#"
PROD_ALGO = "##..##.#.....#...###.#.##.##..#.####..###.##..#.#.#.#...###..###.##..#.#.#..#..######..#..#.##.##..###.......#..##.##.#.######..#.####.##.#.####.#.###...###.##.###.#.##.#.###.#..###.###.##.#.#..####.##....#.#..####.###.###..##..######.#.#..###..#...####..#.#..###.###....#.#.#...####.#...#....#.##.#.##.#.###.#..#.##...#.##.#..##.#..##..#..#..##.#..##..#....##.##..##.#....##..#..#...#.##.#....####.##.#.#.#...##.#.######.#..##.##.#.#......#.####.#.#.#.##..##.##.##..##..###..####..##.#..##.##.###.####..#..##..."

TEST_IMAGE = [
    "#..#.",
    "#....",
    "##..#",
    "..#..",
    "..###",
]

PROD_IMAGE = [
    "###.#.##.##..#....##.#....#.....##....#.#...#..##..###.#.#.###.#.#.#.#.#.##..#####...#...#.#..##....",
    "....##.#...#..######.#.#.#######...##..##.#######.#.##..#...###..####.#..#.###..##...##.###.#..##.#.",
    ".##.#..#######..#..#.......#.#####.##.#.#.#.##....##.##.###....####.##.#......#.#.#.####.###...####.",
    "#.#.##..#####.##...###..#......####.#.#.###......##.#.###.#...#.##.#.#.###...##...###..###.####..#..",
    "#..##.#....#.#....##.#####.##..#..##.#.#.#...#..#.####....##...#......#.##..##.##.#....###..##....#.",
    ".#.......#.#...####..###...##......#.#.##.###.#..#.##..#....#..###.###.#.#.##..#.#.#.####.#..#.#.#..",
    "####.##..#...###.#.##...#..###....##.##....##.####.#.##.##..##..#..##.##.#..###.#......###....#.#...",
    "#....#.#..#.###.##..##.#.###....###.#.##.#...###.##..##.##.#..##.#...#....##...####.#..##...#.....#.",
    "#...#.##.#..#....##....#.###.#.##.#.##.#..#......##.###..#......#..##...#.###..#.###..#..###..#.##.#",
    "##..#.#####.#..##...#.....##.###..##.....#.#.#.##..###...#......##..#.###..#....##.#.####.###.##.#.#",
    "##..##.#.##..#.#.#####.##.......#......#....#..####.#.##..#.#......#..#.#####.###.###.#.#.###.#..#.#",
    "#......#..###........##.#.###.###..##..#.######....##..##....####..##..######.....###.#..##.####.#..",
    "..###...#....#...###.#........#.###.#.###.####.###.####.####....##...#.##.###.......#.##..##.#....##",
    ".###.#..###.##...#...##.###.##..#.#.#####.##...#....#.#####..####...#####.#.#.###..#.###...#..##.##.",
    "##.#.#.#.#.#.#...###..###....##########.##...#.#..##...####..###.###.#.#######...##.###.#.##.###.##.",
    "..#....###.##.#.#.....#...##...##.#.##..##.####....####...##....#.######.#..##.#...###..#.#..##.....",
    "#.#...##....###.##.###.##..##..#.###..#...##.#.###...#...###...##.#.#....####.####..#..#.#.##.#..##.",
    "....##..#...#.##..#..###..#..#...#.#####.#..#.####..#...##.######..###.#.#....###..#...####...###.#.",
    "..#......#.#...#.##...#.####.###.#.##.#####.....#..#...#########....#.#####..#..#####.##.#.....#.#..",
    "#....#.#.#.#...##.#..#.#..#########..##........######.####...#..#.##..#.#.##.......#.....##.###...#.",
    ".###.#.##.#...##.###...####.#.########...#..##..##...#.##.##...##.....#.#..#.##....##...#..##.#..###",
    "###..#.#..#.#..#.#####....#.....##.##..#......##.#..###...#.##...##...#.###...#.#.####.#..#..##..#..",
    "#.#..#....#.#.#...#...###..#####.##.###.#..#.#.............#.....#####.#.#.#..##...#.###...#.##.#.##",
    "#.##.#...##..#.#..#..####..#..##.#.############...#..#.#...#...###.....#.#.#...#.#.#####..###.#..###",
    "#.##.#..###.#.###.##.#.#.#.##.#..#.#.#.##..#.##.##.####..#..##....##..####.##.#.#.#.#.######.....#..",
    ".####.###.#####...##.#.####...###.#.###..##...#.#.....#.#.###...#...######.#.#..#.#...##..#...####..",
    "##.##.###.##.#....#####...#..#.#.#.#.##.##.##......#..#..#..###.##....#####....##..##.###.###...#.##",
    ".###.#....##.#.##....##....#####.#.#.#..#.#.#.###...###.###..##...###.####...#.#.#...#.......##.#.#.",
    "..####.###..##..####...#.#####.##.##.#.####.##.####..#...#..#.####.###.######.##.###..#.#.##...##..#",
    "..####...#.##.##.###...#..##..####..#.##.#..#..####.#.......#..#..##....###..#.#....##..##..##..#..#",
    "...#.#.##.##...#.#####.#..#######..###.###...##.####.#.####.######.#.##.#...#.#####..##..#.#.#######",
    "##.#.#.#.#...###...#.#......##......##...#....####.######.#....###...##.#.##.#.#..#...##..#.#..##...",
    "#####.###.##.##..#.#.....########.###..####..#.#..#..#....##...###.#...###.#.####..###..#......#.#..",
    "#.#..#...#####...#...#.#..#.####..###.#...###..#.#.#...###.####....#####...###.#..##.#..##....######",
    "#.....#.#..#######...#.#....#.#....###..##..#..####.......#.....#..#.....#...####.###..###.#.##.#..#",
    ".##..##..#.....##...###.......#.##..#..###..#.##.#...#..#.####..#.##...#.....###.#.#..#.#..##.#...##",
    ".#..#.#.##.#...##..##.#####..######.###..##.#.#.#.###..#####..#....###..........#.###...##.......#.#",
    "######..#.#####...##.#.#..##..#....###.##..###...#.#.###.####..#...##..#.###.....####.###.......##..",
    ".#.###.#.#..#.###..###.#...###....###...#.#.#.#.#..####.##..#####...#.##.##..#.#.#..##.###.#...#.##.",
    "...#####.#....#..#######...#..#.##...##.#.#..#.....#.....#....##..#..#.#....#.##.#..###...##..####..",
    "##...#....#.#..##.####..#.##..#.#..#.##....#.###..#.#####..#.###..##.....##.#.###.......#.#..#.#..#.",
    ".###...##.#.##.##.#....#.#.####..#....##..#.##...####..#..#.##.#.#....#.....####...##.##.##.....####",
    "##...#.####...###.#.##...#...#.....####.#....#.#.##..#.#.#.#..#..#..#.......###...#.##..#.#.....####",
    ".###...#...##.#...#..##.#.#..###.#..#.##..#.###....########...#...##.##.#.#.#.#....#.....#....#.....",
    "#......##.##.##...##..#.##.......##.#.####.......#.#.######...#......###....########..#..######.###.",
    "########.#.###....#.#...###..##.###.###.#..#.#...#...#..###..##..###.....##.#....#.##.#..##...##.###",
    ".#..###...###.##.....##.##..#......#.##.....###...###...####.#..#.#..#...#...#..##.#.##...#.####...#",
    ".....#####...#.##.###..####....##.#...#.##..#..##..##.#.###.###.###.#.#..#.##...##....###..#..#....#",
    ".###...#.###..##.#.#.###..#.###.###.##.#.##...#...##.#.#......#.....##.....##.##..##.#.####....#.##.",
    ".#..##.##...####.##...#.#..#.#.###...##.##.#.###....#..##.######..#.####.#.#.##.##.##.##.........#.#",
    ".#..##.#.#....###.##.##.###########.#..#.##.#####....###.....###.#######......#.##..#.#....#.##..##.",
    "##.###.##.##.#.##.......##..#.##..##.##..#.###.#######.##.#.#...###....#...###....#.#.....#..#..#.##",
    "...##.###.#......#.#.####.##.....#.#.##.#.#.#.#.#.##..####..####..#...#..###.#........##........#.#.",
    ".#.....#####.....####.#...##.#.#..##.#.###.#..##.#.#.#...###.##.#.#.##...#.#...##....#.###.###.#####",
    ".##..#####...#######.##...##..#.####..##..###..#...#.#.####..##.....###.....##.....##..###....######",
    "...###..##.#.#.##.#...#..#...######...#.##..##.####.####.#####.##.#....#####..###...##..#.###..#..#.",
    ".##.#...###.#.###...#.###....###.#.#.##.####.#.....##.....###.#..#.#.#.#.##.##....#...#....##..#....",
    ".....#.###.#...###...#..#.###..#.#...#.#..###...#...##.#.#.####.#####.##.#####..##..##.#..####...#..",
    "...####.#..#.######.#..#.#...###..#...#..#.####....#.#....##.#.##.....###..#.##.#.#.##.#..####.##.#.",
    "#......#.###.###..#####.#....#####.#.##.######.#.#.##...#.###..#..#####.#.#...#.#..#..##########...#",
    "#.#...##..##.###...##..###.###...##..##.#####.###.##.#######.#.#.#..##..#..#.####.##.##..####.#.####",
    "####.#.#..####....####.##..#####..###...#.#...#.#.##.###..##.#..###...##..#.#..#.#.####.#.###..#..##",
    "..##.#..#....##..####.###.####..#.###.##..####..##..###...##..#.##.#####.##.#....###..#.#...#..#....",
    ".#.#.#.#.....#.#..##.#....#.....##.##..##.#....#.##.#...#####.####.##.####.#..#.##..#.###..##.###...",
    ".#....#.#.##.###.#.#.###.###..#..#..#.###.#....#####...#####.##.#.....##..###.##..#..##.##..#...##.#",
    "##..#.###.##.#.##...#....#..#.#.....##...##.#...#.#############.####..#....##.#........###.##..#..#.",
    "...#######.#.##.##...#.#####..####..########.###.#..##.#..##.#.....#..........####.######.....#.....",
    "..####.#.##..#.#......##.#.###....#....##..#.#.#########..#.#..###........#.##.#..#.##....#.#.##.##.",
    "###.########.#.#.....###...#..####..#.#.##.#..#.####.####.##...##.#....#.....######...#...#.#.##..#.",
    "##.#.#.#..#.#.###..##.##..#####.#.#.#..........#.##.#..#..#...#.#.##...#..##.#.##.##...#####.##.###.",
    "###.....##.#..###.#.#..#.#..##.###....##.#.##....#.##.........#..#.##..#.##.#.####.##.#.#.#.###.#.##",
    "..#.##.##..#..##..#.#..##..##..#.####.##..##....#..#.###..#..#..##.....#.....##...#..#..#...##....#.",
    "#..#.##.#.#...#.####..#..##.####...##...####..####.#...##.##...#.#.#.#.......###.#####.##.#.#.#..#.#",
    ".....##.#.###.###.#..#.#....###.#.###.##..#.#..##..#.#...###.##.##.#...##....#.###.#.##.##.#...#####",
    "..#####.##.#####..#.#...#.##...##...##.##.###.#####..#..#..#..#.###..#....###..#..#...###.##.##...#.",
    "##..##..#.#.#.#.#.#.#.###.###.#..#.#....#.##....#####.#..##.#....##..####..###......#.#.#...##.#.###",
    "....#.###.#.#.###.#.##..#.###.....###.###.#.#####.........#....####..#.###..##.####...##..####..####",
    "#######.##.#..#..##...#...#..###..#..#.###...#...#...###...#..#..##.###....#..#...#####..##...##....",
    "#....#....##...##.#####.#.##.##..#...#.#.##.#...#...#..###.......###.#.##..###...#...###...####.#...",
    ".##.#.###.#.....#.##.#.##..#...#.###.#.#.#.###..###.##.##.#.##.##.##....##.#.###.#####.##..#####.###",
    "###...####.####...#......#..###...#...##.#.#....#.##.##......###..#.#...####.#....##..##.....#.###.#",
    ".###..##.....##.##.###...#..####.#...#######..##.#.##..##.##..#.#.##.#.#..#..#....########..##....#.",
    "#.#.##.###..#.##.##.#.###....####..#####.##.#..#.#.##.....#.#.#.....##..#.#.#..#...#..##.#..####.##.",
    ".###..#.####...##.#..####.#...#.#....#..##.#####.#.#..#.#.#.#....#.....#...#.#...#.#...#......#.....",
    ".#####.#..#####.#....##.##.....##.####..#..#.##.###.##....###.##.#####.##.##..####.#.#....#.##....##",
    "###.#.#.#.#.##..............##...##.####....#.##..#...##....#..#...##..#...#####.##.##.#.####....###",
    "...###.###..#.....#..#.##.###..#.#.#.####...###..###.#.....###.###.#####..#####...#.#..#.....##.#.#.",
    "...##......#....#.##.#.##.#.#.#..##.#...#..##.###.#.##..#####.#.##.####..#..#.#######...#..####.#...",
    "..#...#......#.##..##.#........#.#..##.#..###...#....#.#..#..##..##..#...###..#.#..##.#######.#.#.#.",
    "####...###..#..#..##..###.#.####.##..##.####.#...#.##.###.#..#...#.##...#####.#...#...#..#.#.#....##",
    "..#..###....##...#.##.###.##...######.####..#########..####.####.##....#.###..#...###..#.#..#...###.",
    "#..###.##.##....#...####..#.#.#..#.#..#.....#.##..##..#..#.#..#.#.##...#####..#.###.####.##..#......",
    "#.##.##.##.#.##..#...#.#####.#..#....##..#.#######.#..###..##..#.###..#.##...#.....#......#..####.##",
    "##.#.##..###.######.........#######.##.#.##.#...####.####.#######..#..##.#.#....#..#.#####...##.#..#",
    "##..........#.#.######..##...####.#.....#....##..#.#.####.##..##...##...###.##..####.#.#..#...##.#.#",
    ".####..##.#..#.##.#.#.#..#####...####..#.#.#...#.#...#.#.#.#.##.#..#..##.#.####.#......#.#...##.#.#.",
    "####.#.##.##.###.#####..#..###.#.#..###....#....##...##...#..#....####...#####..#.##.#####.##.#.##.#",
    ".##.##..#####.#...#.###.###.#.##..#.##..#.##...##..#.#####.#.#....###.....##.#....##.#.##..#.######.",
    "###.#.#####.#.###.....#######..##.#..#.#.#.##.#.#..#..#.#.##...#.#...#..####..#.##.###..##.#.#.##..#",
    ".#####.####....#..#.#.#.###.#.#...##.#.##.#.#.########...###.##.#..#.#...#..#..##.#.#..#..#.#..#.#..",
]


class TestDay20(unittest.TestCase):

    def test_part_a(self):
        self.assertEqual(35, enhance(TEST_ALGO, TEST_IMAGE, 2))

    def test_run_part_a(self):
        self.assertEqual(5663, enhance(PROD_ALGO, PROD_IMAGE, 2))

    def test_part_b(self):
        self.assertEqual(3351, enhance(TEST_ALGO, TEST_IMAGE, 50))

    def test_run_part_b(self):
        self.assertEqual(19638, enhance(PROD_ALGO, PROD_IMAGE, 50))


if __name__ == '__main__':
    unittest.main()
